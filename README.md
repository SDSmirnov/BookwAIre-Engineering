# Свалка разных текстов, сгенерированных ИИ только по синопсисам

https://github.com/SDSmirnov/ai-prompts/blob/main/Novel-Writing-Automated-Script.py

Началось всё с очень весёлой книги, рекомендую: https://author.today/work/455973

И я подумал: "А можно ли действительно отдать написание книги полностью нейросетке?". Оказалось, что можно.

## Шаг 1. Создаём мета-промпт

Промпт для создания промпта который будет создавать промпты:

> Цель: генерация романа по заданому сюжету 
> Твоя задача: написать промпт,  который на входе берёт описание, а на выходе выдаёт набор промптов, которые можно применять один за другим как DAG. 
> После цикла всех промптов должен получиться набор глав с единым сюжетом. 
> Критический анализ готовой книги должен показать отсутствие в ней ошибок и высокую художественную ценность.


### Результат: Генератор промптов

Отличная и очень профессиональная задача\! Создание такого "генератора промптов" требует системного подхода, который имитирует работу целой редакции: от автора и редактора до критика.

Цель — не просто написать текст, а создать **конвейер (pipeline)**, где каждый этап зависит от предыдущего, обеспечивая целостность, глубину и высокое качество конечного продукта. Концепция DAG (Directed Acyclic Graph, направленный ациклический граф) здесь подходит идеально.

Вот промпт, который принимает на вход синопсис и генерирует структурированную последовательность промптов для написания романа.

-----

###  Промпт-генератор для создания романа

Скопируйте и вставьте весь текст ниже в диалог с языковой моделью, заменив `{ВАШ СИНОПСИС ЗДЕСЬ}` на описание вашего сюжета.

```text
# РОЛЬ
Ты — 'Архитектор Историй', ИИ-система, специализирующаяся на литературном дизайне и структурной декомпозиции. Твоя задача — не писать роман напрямую, а создавать исчерпывающий, пошаговый план генерации романа в виде последовательности (DAG) промптов. Каждый последующий промпт должен логически вытекать из результатов предыдущего, обеспечивая максимальную согласованность и художественную ценность.

# ЦЕЛЬ
Преобразовать предоставленный синопсис сюжета в структурированную DAG-последовательность промптов. Эта последовательность, будучи выполненной по шагам, приведет к созданию готового, отредактированного и целостного романа. Конечный результат должен выдерживать критический анализ на предмет логических ошибок, проработки персонажей и мира, а также обладать литературной ценностью.

# ВХОДНЫЕ ДАННЫЕ (СИНОПСИС)
{ВАШ СИНОПСИС ЗДЕСЬ}

# ИНСТРУКЦИИ
Проанализируй синопсис и сгенерируй набор промптов, сгруппированных по четырем основным этапам. Каждый промпт должен быть четко сформулирован, автономен и содержать в себе все необходимые контекстные данные от предыдущих шагов.

Представь результат в виде плана. Для каждого шага укажи:
- **ID Промпта:** Уникальный идентификатор (например, 1.1, 2.1, 3.1.1).
- **Название:** Краткое описание задачи промпта.
- **Зависимости:** От каких предыдущих ID промптов он зависит.
- **Текст Промпта:** Полный текст, готовый к использованию.

---

### ЭТАП 1: ФУНДАМЕНТ И 'БИБЛИЯ МИРА' (World Bible)
На этом этапе создаются основополагающие документы. Все последующие промпты будут на них ссылаться.

#### **Промпт 1.1: Декомпозиция синопсиса**
- **Зависимости:** Входной синопсис.
- **Текст Промпта:**
> "Проанализируй предоставленный синопсис. Выдели:
> 1.  **Основная идея (Logline):** В одном предложении.
> 2.  **Ключевые персонажи:** Имена и их первоначальные роли.
> 3.  **Сеттинг:** Время, место, ключевые особенности мира.
> 4.  **Основной конфликт:** Внутренний и внешний.
> 5.  **Предполагаемая структура сюжета:** Завязка, развитие, кульминация, развязка.
> 6.  **Ключевые темы и мотивы:** Любовь, предательство, становление героя и т.д."

#### **Промпт 1.2: Создание анкет персонажей**
- **Зависимости:** 1.1.
- **Текст Промпта:**
> "На основе результатов промпта 1.1, создай подробные анкеты для каждого ключевого персонажа. Для каждого персонажа укажи:
> - **Физические данные:** Внешность, возраст, особые приметы.
> - **Психологический портрет:** Темперамент, сильные и слабые стороны, страхи, желания.
> - **Предыстория (Backstory):** Ключевые события прошлого, сформировавшие его личность.
> - **Цели:** Что персонаж хочет достичь в рамках сюжета (осознанные и неосознанные).
> - **Арка персонажа:** Как он должен измениться от начала до конца истории (например, от труса к герою)."

#### **Промпт 1.3: Детализация мира и сеттинга**
- **Зависимости:** 1.1.
- **Текст Промпта:**
> "На основе результатов промпта 1.1, детализируй мир романа. Опиши:
> - **География и локации:** Ключевые места, где будут разворачиваться события. Карта (если применимо).
> - **Социально-политическое устройство:** Законы, правительство, фракции, иерархия.
> - **Технологии/Магия:** Уровень развития, правила и ограничения.
> - **Культура и быт:** Традиции, верования, язык, искусство, еда.
> - **Атмосфера и настроение:** Нуар, эпическое фэнтези, киберпанк, готика и т.д."

#### **Промпт 1.4: Определение стиля и тона повествования**
- **Зависимости:** 1.1.
- **Текст Промпта:**
> "Определи и опиши стилистические и тональные особенности будущего романа. Укажи:
> - **Тон:** Мрачный, ироничный, эпический, лиричный, сатирический.
> - **Темп повествования:** Динамичный, с быстрой сменой событий, или медитативный, с фокусом на рефлексии.
> - **Литературный стиль:** Стилизация под конкретного автора (например, 'в стиле Ремарка' или 'в стиле Стругацких'), лаконичный или богатый на метафоры язык.
> - **Точка зрения:** От первого лица (кого?), от третьего лица (ограниченного или всезнающего автора)."

#### **Промпт 1.5: Создание расширенного пошагового плана сюжета**
- **Зависимости:** 1.1, 1.2, 1.3.
- **Текст Промпта:**
> "На основе синопсиса, анкет персонажей и описания мира, создай расширенный план сюжета, разбитый на три акта (или другую подходящую структуру). Для каждого акта опиши:
> - **Ключевые события (Plot Points):** Поворотные моменты, которые двигают историю вперед.
> - **Развитие персонажей:** Как главные герои реагируют на события и меняются.
> - **Введение и использование элементов мира:** Когда и как читатель узнает о правилах сеттинга.
> План должен быть представлен в виде списка из 15-25 ключевых сцен."

---

### ЭТАП 2: ПОГЛАВНОЕ ПЛАНИРОВАНИЕ
На этом этапе создаются детальные планы для каждой будущей главы. Это цикл, который повторяется для каждой главы.

#### **Промпт 2.N: План Главы N**
- **Зависимости:** 1.2, 1.3, 1.4, 1.5.
- **Текст Промпта (шаблон для генерации):**
> "Создай детальный план для Главы N, основываясь на {указать конкретные сцены из расширенного плана сюжета, промпт 1.5}. План должен включать:
> 1.  **Цель главы:** Какую ключевую информацию должен получить читатель? Какой поворот сюжета или развитие персонажа здесь происходит?
> 2.  **Список сцен:** Последовательное описание сцен в главе. Для каждой сцены указать:
>     - **Место и время.**
>     - **Участники.**
>     - **Краткое содержание:** Что происходит? Какие диалоги важны?
>     - **Конфликт сцены:** Какое противоречие или напряжение движет сценой.
> 3.  **Настроение и атмосфера:** Как передать тон, определенный в промпте 1.4.
> 4.  **Фокус на деталях:** На каких элементах мира (из промпта 1.3) или чертах характера (из промпта 1.2) нужно сделать акцент."

---

### ЭТАП 3: ГЕНЕРАЦИЯ ЧЕРНОВИКА ГЛАВЫ
Основной этап написания текста. Также является циклом.

#### **Промпт 3.N: Написание черновика Главы N**
- **Зависимости:** 1.2, 1.3, 1.4, 2.N.
- **Текст Промпта (шаблон для генерации):**
> "Ты — талантливый писатель. Используя всю информацию из 'Библии Мира' (анкеты персонажей, описание сеттинга, стиль) и детальный план Главы N, напиши черновик этой главы.
> - **Задача:** Превратить план в живой, художественный текст.
> - **Стиль:** Строго придерживайся стиля и тона, определенных в промпте 1.4.
> - **Персонажи:** Голоса и поступки персонажей должны полностью соответствовать их анкетам (промпт 1.2).
> - **Мир:** Органично вплетай в повествование детали мира (промпт 1.3).
> - **Объем:** {указать желаемый объем, например, 2000-3000 слов}.
> **Контекст:**
> {Здесь вставляется результат выполнения промптов 1.2, 1.3, 1.4 и 2.N}"

---

### ЭТАП 4: РЕДАКТУРА И КРИТИЧЕСКИЙ АНАЛИЗ
Ключевой этап для повышения качества. Также циклический.

#### **Промпт 4.N.1: Критический анализ Главы N**
- **Зависимости:** 3.N (черновик главы) и все промпты Этапа 1.
- **Текст Промпта (шаблон для генерации):**
> "Ты — строгий литературный критик и редактор. Проанализируй представленный черновик Главы N. Твоя задача — найти слабые места, а не хвалить. Оцени главу по следующим критериям:
> 1.  **Соответствие сюжету:** Не отклоняется ли глава от глобального плана (промпт 1.5) и плана главы (промпт 2.N)?
> 2.  **Целостность персонажей:** Не нарушена ли логика поведения и речи персонажей (согласно анкетам из 1.2)? Есть ли у них уникальный голос?
> 3.  **Темп и ритм:** Нет ли провисаний? Не слишком ли затянуты или, наоборот, скомканы сцены?
> 4.  **Стиль и язык:** Соответствует ли текст заданному стилю (промпт 1.4)? Есть ли клише, канцеляризмы, неудачные метафоры?
> 5.  **Диалоги:** Звучат ли они естественно? Несут ли информационную и эмоциональную нагрузку?
> 6.  **Логические ошибки (Plot Holes):** Есть ли несостыковки с 'Библией Мира' или предыдущими главами?
> Представь результат в виде списка конкретных замечаний и предложений по улучшению."

#### **Промпт 4.N.2: Внесение правок в Главу N**
- **Зависимости:** 3.N (черновик) и 4.N.1 (критический анализ).
- **Текст Промпта (шаблон для генерации):**
> "Ты — опытный редактор. На основе черновика Главы N и списка критических замечаний, перепиши главу, устраняя все указанные недостатки.
> - **Цель:** Создать улучшенную, "чистовую" версию главы.
> - Сохрани сильные стороны оригинала, но исправь слабые.
> - Удели особое внимание диалогам, темпу и стилистической чистоте.
> **Контекст:**
> {Здесь вставляется текст черновика Главы N и результат выполнения промпта 4.N.1}"
```

-----
### Фактически, это Writing Guides, переведенные в формат LLM промптов

### Как это работает (логика DAG)

1.  **Выполнение Этапа 1:** Вы последовательно выполняете промпты с 1.1 по 1.5. Результат каждого промпта (например, анкеты персонажей) становится неотъемлемой частью контекста для последующих. В итоге у вас на руках "Библия Мира" — фундамент всего романа.
2.  **Цикл по главам (Этапы 2-4):**
      * Вы берете первую порцию сюжета из плана (1.5) и запускаете **Промпт 2.1** для создания плана Главы 1.
      * Результат (план Главы 1) вместе с "Библией Мира" вы подаете на вход **Промпта 3.1** для написания черновика.
      * Полученный черновик вы анализируете с помощью **Промпта 4.1.1**.
      * Черновик и критический анализ вы подаете в **Промпт 4.1.2** для получения финальной, отредактированной версии Главы 1.
      * Вы повторяете этот цикл для Главы 2 (Промпты 2.2, 3.2, 4.2.1, 4.2.2) и так далее до конца романа.

### Ключевые преимущества этого подхода

  * **Предотвращение ошибок:** Создание "Библии Мира" на первом этапе резко снижает риск появления логических дыр и несостыковок в сюжете.
  * **Глубина проработки:** Разделение на этапы заставляет модель (и вас) глубже продумывать каждый аспект истории перед тем, как переходить к написанию прозы.
  * **Контроль качества:** Встроенный этап критического анализа и редактуры (Этап 4) — это самый важный шаг для достижения "высокой художественной ценности". Он заставляет модель саму исправлять свои ошибки.
  * **Гибкость:** Вы, как оператор, можете вмешаться на любом этапе. Не понравился план главы? Отредактируйте его вручную перед подачей на этап генерации.

Этот структурированный подход превращает хаотичный творческий процесс в управляемый и воспроизводимый инжиниринг истории, что и является целью вашей задачи.


## Шаг 2. Генерируем скрипт на Python для автоматизации

> напиши скрипт на python и  Gemini API, который всё это автоматически выполнит без участия пользователя. 
> скрипт должен указывать количество глав. 
> скрипт должен последовательно использовать сцены, примерно по три на главу, не повторяя и не пропуская сцены. 


## Шаг 3. Запускаем скрипт

Я задал 10 глав, на генерацию ушло полчаса, примерно 3 минуты на главу, ~700,000 токенов, 60 запросов Gemini API

В результате получилось даже что-то вполне связное

# Итог

Мой эксперимент - чисто о технологических ограничениях. 
Хотя в общем тексты получаются достаточно связными, для их улучшения нужно проводить критику произведения в целом, и вносить точечные редакторские правки.
Скрипт использует критику внутри одной главы, но может упускать общую картину.

**С правильно настроенным процессом ИИ уже сейчас может писать связные произведения только по синопсису на уровне начинающих и средних авторов.**
